

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Carla Benchmark Evaluation &mdash; DI-drive 0.3.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Carla Scenario and Casezoo Evaluation" href="casezoo.html" />
    <link rel="prev" title="Datasets" href="datasets.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DI-drive
          

          
          </a>

          
            
            
              <div class="version">
                0.3.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="simulator_feature.html">Carla Simulator Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="policy_feature.html">Policy Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualize.html">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html">Datasets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Carla Benchmark Evaluation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sample-images">Sample images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-metrics">Performance Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="casezoo.html">Carla Scenario and Casezoo Evaluation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../model_zoo/index.html">Model Zoo</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_doc/index.html">API Doc</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DI-drive</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Features</a> &raquo;</li>
        
      <li>Carla Benchmark Evaluation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/features/carla_benchmark.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="carla-benchmark-evaluation">
<h1>Carla Benchmark Evaluation<a class="headerlink" href="#carla-benchmark-evaluation" title="Permalink to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>DI-drive provides hands-on benchmark environment settings <sup>[1]</sup> for Carla simulator. The benchmark setting consists of several suites.
Each suite contains a town map, several kind of weather, num of other vehicles and pedestrians, and a <cite>.txt</cite> file which
provides routes’ start and target waypoints. The standard benchmark evaluation provides three kinds of routes in ‘town1’
and ‘town2’, which are ‘straight’, ‘turn’ and ‘full’. For example, <em>FullTown01-v2</em> refers to an evaluation suite in town1 and ‘full’
routes. Other settings like weathers and NPCs are defined by the number of version. Some suites are aliased for convenience,
for example <em>town1</em> represents all commonly used suites in ‘town1’.</p>
<p>Carla benchmark setting is widely used in other literature as training and evaluation standard.
DI-drive allows users to quickly build up an environment with a benchmark suite setting by deploying
<code class="xref py py-class docutils literal notranslate"><span class="pre">BenchmarkEnvWrapper</span></code>. Once an environment is wrapped, it will ignore
the passed arguments in <code class="docutils literal notranslate"><span class="pre">reset</span></code> method, and choose one from the suite’s route list according to configuration. It can be used
in RL training, to sampling data in benchmark environment settings.</p>
<p>Also, DI-drive deploys <a class="reference internal" href="../api_doc/eval.html#core.eval.CarlaBenchmarkEvaluator" title="core.eval.carla_benchmark_evaluator.CarlaBenchmarkEvaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">CarlaBenchmarkEvaluator</span></code></a> and
<a class="reference internal" href="../api_doc/data.html#core.data.carla_benchmark_collector.CarlaBenchmarkCollector" title="core.data.carla_benchmark_collector.CarlaBenchmarkCollector"><code class="xref py py-class docutils literal notranslate"><span class="pre">CarlaBenchmarkCollector</span></code></a> to run with a policy
and a <code class="docutils literal notranslate"><span class="pre">EnvManager</span></code> in DI-engine that can run several environments in parallel. They can parse reset params in the provided
suite to a list and run all the episodes in order.
The <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code> is used to evaluate a policy by running an amount or the entire benchmark suits,
for example, run 50 or 100 routes in <cite>FullTown02-v2</cite> suite to test its successful rate
in the suite. The <code class="docutils literal notranslate"><span class="pre">Collector</span></code> is used to sample episodes to make IL datasets.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check these modules in <a class="reference external" href="../api_doc/index.html">API doc</a> for detail information.</p>
</div>
<section id="sample-images">
<h2>Sample images<a class="headerlink" href="#sample-images" title="Permalink to this heading">¶</a></h2>
<p>You can check routes in each benchmark suite file in <a class="reference external" href="../../../data/benchmark">benchmark</a> and find start &amp; end waypoint.
Here we show benchmark settings for ‘Town01’ and ‘Town02’<sup>[2]</sup>.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/roadmaps.png"><img alt="roadmaps" src="../_images/roadmaps.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Road maps od Town01 and Town02</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/weathers.png"><img alt="weathers" src="../_images/weathers.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Weather settings for train, test and eval</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="performance-metrics">
<h2>Performance Metrics<a class="headerlink" href="#performance-metrics" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>CILRS</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Suite</p></th>
<th class="head"><p>Success rate</p></th>
<th class="head"><p>Total run</p></th>
<th class="head"><p>Seed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FullTown01-v1</p></td>
<td><p>70%</p></td>
<td><p>70/100</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown02-v1</p></td>
<td><p>99%</p></td>
<td><p>99/100</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Implicit Affordance (single lane)</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Suite</p></th>
<th class="head"><p>Success rate</p></th>
<th class="head"><p>Total run</p></th>
<th class="head"><p>Seed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FullTown01-v1</p></td>
<td><p>100%</p></td>
<td><p>50/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown01-v2</p></td>
<td><p>100%</p></td>
<td><p>50/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>FullTown01-v3</p></td>
<td><p>90%</p></td>
<td><p>45/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown01-v4</p></td>
<td><p>86%</p></td>
<td><p>43/50</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Implicit Affordance (multi lane)</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Suite</p></th>
<th class="head"><p>Success rate</p></th>
<th class="head"><p>Total run</p></th>
<th class="head"><p>Seed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FullTown04-v1</p></td>
<td><p>42%</p></td>
<td><p>21/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown04-v2</p></td>
<td><p>42%</p></td>
<td><p>21/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>FullTown04-v3</p></td>
<td><p>42%</p></td>
<td><p>21/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown04-v4</p></td>
<td><p>50%</p></td>
<td><p>25/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>ChangeLaneTown04-v1</p></td>
<td><p>92%</p></td>
<td><p>46/50</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>ChangeLaneTown04-v2</p></td>
<td><p>92%</p></td>
<td><p>46/50</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Simple RL DQN</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Suite</p></th>
<th class="head"><p>Success rate</p></th>
<th class="head"><p>Total run</p></th>
<th class="head"><p>Seed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FullTown01-v1</p></td>
<td><p>92%</p></td>
<td><p>23/25</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown01-v2</p></td>
<td><p>88%</p></td>
<td><p>22/25</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>FullTown02-v1</p></td>
<td><p>80%</p></td>
<td><p>20/25</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown02-v2</p></td>
<td><p>72%</p></td>
<td><p>18/25</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Simple RL PPO</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Suite</p></th>
<th class="head"><p>Success rate</p></th>
<th class="head"><p>Total run</p></th>
<th class="head"><p>Seed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FullTown01-v1</p></td>
<td><p>80%</p></td>
<td><p>20/25</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>FullTown02-v1</p></td>
<td><p>96%</p></td>
<td><p>24/25</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">[1] J  Hawke, et al. <a class="reference external" href="http://vladlen.info/papers/conditional-imitation.pdf">“Urban Driving with Conditional Imitation Learning.”</a> (2019).</div>
<div class="line">[2] Xiao, Y. , et al. <a class="reference external" href="https://arxiv.org/abs/1906.03199v1">“Multimodal End-to-End Autonomous Driving.”</a> (2019).</div>
</div>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="casezoo.html" class="btn btn-neutral float-right" title="Carla Scenario and Casezoo Evaluation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="datasets.html" class="btn btn-neutral float-left" title="Datasets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, OpenDILab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>